@if (!(isReadonly$ | async)) {
  <div class="relative mt-5">
    <div
        [ngClass]="{
            'flex justify-between border py-4 pl-7 pr-4': !hideGroupBorder,
            'border-red': !hideGroupBorder && (displayAsInvalid$ | async),
            'border-dark-gray-50': !hideGroupBorder && !(displayAsInvalid$ | async)
        }"
      >
      <fieldset>
        @if (!legendAsLabel) {
          <legend class="my-[0.625rem] block text-base font-medium">
            <span [ngClass]="{ 'sr-only': isLegendSrOnly }">{{ legend }}</span>
            <span class="sr-only">{{ hint }}</span>
          </legend>
        }
        @if (legendAsLabel) {
          <legend
            class="text-very-small absolute -top-5 left-6 translate-y-2 rounded-lg bg-white px-1 py-0.5"
            [class.text-red]="displayAsInvalid$ | async"
            [class.opacity-0]="hideGroupBorder"
            >
            <span [ngClass]="{ 'sr-only': isLegendSrOnly }">{{ legend }}</span>
          </legend>
        }
        <div
          class="flex flex-wrap"
                [ngClass]="{
                    'flex-col': displayInline === false,
                    'gap-5': displayInline === false && gapVariant === 'large'
                }"
          >
          <ng-content select="pui-radio-button"></ng-content>
          <ng-content></ng-content>
        </div>
        @if (hint) {
          <div class="mb-2 mt-4 text-base font-light leading-tight" aria-hidden="true">
            {{ hint }}
          </div>
        }
      </fieldset>
      @if (!hideGroupBorder) {
        <div class="ml-2 flex" aria-hidden="true">
          @if (displayAsInvalid$ | async) {
            <pui-icon-invalid class="h-8 w-8"></pui-icon-invalid>
          }
          @if (pending$ | async) {
            <pui-icon-spinner class="h-8 w-8"></pui-icon-spinner>
          }
        </div>
      }
    </div>
    @if (!hideGroupBorder && (isOptional$ | async)) {
      <span
        class="text-very-small absolute -top-5 right-3 translate-y-2 rounded-lg bg-white px-1 py-0.5"
        [class.text-red]="displayAsInvalid$ | async"
        aria-hidden="true"
        >
        {{ 'Practices.Labels_Optional' | translate }}
      </span>
    }
    <div
      [attr.id]="(name$ | async) + '-error'"
      class="text-red text-very-small min-h-5 font-medium"
      [attr.aria-live]="(dirty$ | async) ? 'assertive' : 'off'"
      aria-atomic="true"
      >
      @for (error of errors$ | async; track error) {
        <div>
          {{ error.key | translate : error.param }}
        </div>
      }
    </div>
    <span class="sr-only" aria-live="polite" aria-atomic="true">
      @if (pending$ | async) {
        <span>{{ 'Practices.Labels_Pending' | translate }}</span>
      }
    </span>
  </div>
} @else {
  <pui-readonly-label-value [label]="legend" [useSmallLabel]="useSmallTextForReadonlyLabel">
    @if (labelOfSelectedRadio$ | async; as label) {
      @if (label !== '') {
        <span>{{ label }}</span>
      }
      @if (label === '') {
        <span>{{
          readonlyEmptyValuePlaceholder ?? ('Practices.Labels_Input_NoInputValue' | translate)
        }}</span>
      }
    } @else {
      {{ readonlyEmptyValuePlaceholder ?? ('Practices.Labels_Input_NoInputValue' | translate) }}
    }
  </pui-readonly-label-value>
}
