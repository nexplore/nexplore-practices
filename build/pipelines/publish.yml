name: $(Rev:r)

trigger:
  batch: true
  branches:
    include:
      - refs/tags/*

pool:
  name: ubuntu-22.04
  demands:
  - shell

stages:
  - stage: Build
    jobs:
      - template: build.template.yml

  - stage: Publish
    dependsOn: Build
    variables:
      - group: Practices
    jobs:
      - template: publish.template.yml
        parameters:
          environment: "Nexplore Package Repository"
          nuget_public_release_api_key: $(NuGetPublicReleaseApiKey)
          nuget_pre_release_api_key: $(NuGetPreReleaseApiKey)
          npm_public_release_api_key: $(NpmPublicReleaseApiKey)
          npm_pre_release_api_key: $(NpmPreReleaseApiKey)
